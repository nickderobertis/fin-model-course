\documentclass[handout, 11pt]{beamer}
\mode
<presentation>{\usetheme{Madrid}}
\institute[UF]{\inst{1}
University of Florida\\
Department of Finance, Insurance, and Real Estate}
\usepackage{adjustbox}
\usepackage{tikz}
\usepackage{minted}
\definecolor{darkgreen}{RGB}{31,156,17}
\setbeamertemplate{headline}{\begin{beamercolorbox}[ht=2.25ex, dp=3.75ex]{section in head/foot}
\insertnavigation{\paperwidth}
\end{beamercolorbox}}
\AtBeginSection{\begin{frame}
\frametitle{Table of Contents}
\tableofcontents[currentsection]
\end{frame}}
\begin{document}
\title[Python Basics]{Going Beyond an Initial Python Script}
\subtitle{How to Structure Python Code and Common Operations}
\author[DeRobertis]{Nick DeRobertis\inst{1}}
\date{\today}
\begin{frame}
\titlepage
\label{title-frame}
\end{frame}
\begin{section}[Intro]{Introduction}
\begin{frame}
\frametitle{An Organized Structure of an Advanced Python Model}
\begin{columns}
\begin{column}{0.5\textwidth}
\vbox to 0.8\textheight{\begin{itemize}
\item Now we are going to build our first complex Python model
\vfill
\item We will also learn a bit more Python before we can get there
\vfill
\item Just as we did in Excel, we need to add structure to make the model navigatable
\vfill
\item Logic should be organized in functions and be documented
\end{itemize}}
\end{column}
\begin{column}{0.5\textwidth}
\vbox to 0.8\textheight{\centering
\vfill
\includegraphics[height=1.0\textheight, keepaspectratio, width=0.9\textwidth]{Sources/python-logo.png}
\vfill
\vfill}
\end{column}
\end{columns}
\end{frame}
\begin{frame}
\frametitle{The Structure of a Complex Model}
\begin{center}
\begin{adjustbox}{width=0.9\textwidth, height=0.8\textheight, keepaspectratio}
\begin{tikzpicture}
\node [fill=orange!30, minimum width=2cm, minimum height=8cm, rectangle, draw, text=black] (d7ba831b-fcc0-469c-89b9-18a256d53192) at (-3.35, 4) {\textbf{Inputs}};
\coordinate [fill=blue!50, minimum width=5cm, minimum height=8cm, rectangle, draw] (57c93ac4-7e2d-4b83-9355-31ebfa4b8ecc) at (1.25, 4) {};
\node [text=white, above=0.2cm ] (83d02e9f-31ea-4b4c-82c9-d13218571dd4) at (57c93ac4-7e2d-4b83-9355-31ebfa4b8ecc.south) {\textbf{Model}};
\coordinate [fill=blue!90, minimum width=4cm, minimum height=1.75cm, rectangle, draw] (096ce575-89af-4620-bc37-0ba06c2a1767) at (1.25, 1.75) {};
\node [text=white, above] (bbfc1c77-396c-4b80-987f-e73b558db656) at (096ce575-89af-4620-bc37-0ba06c2a1767.south) {Sub-Model};
\coordinate [fill=blue!90, minimum width=4cm, minimum height=1.75cm, rectangle, draw] (b7a51239-2167-4148-aed1-4f213e9044b8) at (1.25, 4.25) {};
\node [text=white, above] (11ab7502-a77d-41bc-93c1-71aa29ad4b6f) at (b7a51239-2167-4148-aed1-4f213e9044b8.south) {Sub-Model};
\coordinate [fill=blue!90, minimum width=4cm, minimum height=1.75cm, rectangle, draw] (adaae9c9-5672-4801-9347-8246c0a70c6c) at (1.25, 6.75) {};
\node [text=white, above] (254349c0-3ef6-4423-87e7-cc1a3b29f368) at (adaae9c9-5672-4801-9347-8246c0a70c6c.south) {Sub-Model};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (0a067683-0163-457d-8b79-bb297332b02f) at (0.0, 1.95) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (0c2489a2-36a0-47f1-b8a3-7df92b0fb2c0) at (1.25, 1.95) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (6b6f31d2-dfba-46b1-8845-bb2cee2b9135) at (2.5, 1.95) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (761cc1f6-b778-4af3-8b18-09f5c3f20c8d) at (0.0, 4.45) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (fa14181c-4f5d-4415-b5b1-1fc8019e59a0) at (1.25, 4.45) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (362edb7c-6dea-4249-8d20-ddcd1445035c) at (2.5, 4.45) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (e2514b07-f1ea-4cde-9ab0-751e66e1e188) at (0.0, 6.95) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (d75600c9-ff05-486a-887c-ae847ae35e8a) at (1.25, 6.95) {Step};
\node [fill=cyan!20, minimum width=1.1cm, minimum height=1cm, rectangle, draw, text=black] (5133c651-1eb0-4839-818c-23a8739f8390) at (2.5, 6.95) {Step};
\node [fill=green!20, minimum width=2cm, minimum height=8cm, rectangle, draw, text=black] (cab8d1c6-3026-4e8c-9ab1-669f4c05f9f1) at (5.85, 4) {\textbf{Outputs}};
\path [draw, line width=0.75mm, ->] (-2.3, 4) -- (-1.3, 4);
\path [draw, line width=0.75mm, ->] (3.8, 4) -- (4.8, 4);
\end{tikzpicture}
\end{adjustbox}
\end{center}
\end{frame}
\end{section}
\begin{section}{Conditionals}
\begin{frame}[fragile]
\frametitle{Python Conditionals - If Statement}
\begin{block}{If Statements in Python}
\small
\begin{minted}{python}

>>> if 5 == 6:
>>>     print('not true')
>>> else:
>>>     print('else clause')
>>> 
>>> this = 'woo'
>>> that = 'woo'
>>> 
>>> if this == that:
>>>     print('yes, print me')
>>> if this == 5:
>>>     print('should not print')

\end{minted}
\texttt{else clause}
\\
\texttt{yes, print me}
\end{block}
\end{frame}
\begin{frame}
\frametitle{Explaining the If-Else Statements}
\begin{itemize}
\item Use two equals signs to compare things (single to assign things)
\vfill
\item Else is equivalent to value if false behavior in Excel
\vfill
\item We can do a lot more than just set a single value, anything can be done in an if or else statement
\vfill
\item \texttt{elif}
 is a shorthand for else if, e.g. not the last condition, but this condition
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Conditionals Example}
{
\setbeamercolor{block title}{bg=darkgreen}
\begin{block}{Trying out Conditionals}
\begin{itemize}
\item On \textcolor{blue}{\underline{\href{https://nickderobertis.github.io/fin-model-course/}{the course site}}}, there is a Jupyter notebook called Python Basics containing all of the examples for today's lecture
\item Now I will go through the example material under "Conditionals"
\end{itemize}
\end{block}
}
\end{frame}
\begin{frame}
\frametitle{Conditionals Lab, Level 1}
{
\setbeamercolor{block title}{bg=violet}
\begin{block}{Python Conditionals, Level 1}
\begin{enumerate}
\item On \textcolor{blue}{\underline{\href{https://nickderobertis.github.io/fin-model-course/}{the course site}}}, there is a Jupyter notebook called Python Basics Lab containing all of the labs for today's lecture
\item Please complete the exercises under "Conditionals"
\end{enumerate}
\vfill
\end{block}
}
\label{lab:conditionals-1}
\end{frame}
\end{section}
\begin{section}[Lists]{More with Lists}
\begin{frame}[fragile]
\frametitle{Python Patterns - Building a List}
\begin{block}{List Building}
\begin{minted}{python}

>>> inputs = [1, 2, 3]
>>> outputs = []
>>> for inp in inputs:
>>>     outputs.append(
>>>         inp + 10
>>>     )
>>> outputs.insert(0, 'a')
>>> print(outputs)
['a', 11, 12, 13]

\end{minted}
\end{block}
\begin{itemize}
\item Use 
\texttt{.append}
 to add an item to the end of a list
\item Use 
\texttt{.insert}
 to add an item at a certain position
\end{itemize}
\end{frame}
\begin{frame}[fragile]
\frametitle{List Indexing and Slicing}
\begin{itemize}
\item Index is base zero (0 means first item, 1 means second item)
\end{itemize}
\vfill
\begin{minted}{python}

>>> my_list = ['a', 'b', 'c', 'd']
>>> my_list[0]  # first item
'a'
>>> my_list[1]  # second item
'b'
>>> my_list[-1]  # last item
'd'
>>> my_list[:-1]  # up until last item
['a', 'b', 'c']
>>> my_list[1:]  # after the first item
['b', 'c', 'd']
>>> my_list[1:3]  # from the second to the third item
['b', 'c']

\end{minted}
\end{frame}
\begin{frame}
\frametitle{Lists Example}
{
\setbeamercolor{block title}{bg=darkgreen}
\begin{block}{Doing More with Lists}
\begin{itemize}
\item We will keep working off of Python Basics.ipynb
\item Now I will go through the example material under "Working more with Lists"
\end{itemize}
\end{block}
}
\end{frame}
\begin{frame}
\frametitle{Lists Lab, Level 1}
{
\setbeamercolor{block title}{bg=violet}
\begin{block}{Python Lists - Beyond the Basics, Level 1}
\begin{enumerate}
\item Keep working off of Python Basics Lab.ipynb
\item Please complete the exercises under "Working with Lists"
\end{enumerate}
\vfill
\end{block}
}
\label{lab:lists-1}
\end{frame}
\end{section}
\begin{section}{Functions}
\begin{frame}[fragile]
\frametitle{Functions - Grouping Reusable Logic}
\begin{itemize}
\item In Python, we can group logic into functions
\vfill
\item Functions have a name, inputs, and outputs
\vfill
\item Functions are objects like everything else in Python
\vfill
\item \begin{minted}{python}

def my_func(a, b, c=10):
    return a + b + c

>>> my_func(5, 6)
21

\end{minted}
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Functions Example}
{
\setbeamercolor{block title}{bg=darkgreen}
\begin{block}{Structuring Code using Functions}
\begin{itemize}
\item We will keep working off of Python Basics.ipynb
\item Now I will go through the example material under "Functions"
\end{itemize}
\end{block}
}
\end{frame}
\begin{frame}
\frametitle{Functions Lab, Level 1}
{
\setbeamercolor{block title}{bg=violet}
\begin{block}{Using Functions to Structure Code, Level 1}
\begin{enumerate}
\item Keep working off of Python Basics Lab.ipynb
\item Please complete the exercises under "Functions"
\end{enumerate}
\vfill
\end{block}
}
\label{lab:functions-1}
\end{frame}
\end{section}
\begin{section}[Data Types]{More about Data Types}
\begin{frame}
\frametitle{What are Types?}
\begin{itemize}
\item In Python, everything is an object except for variable names, which are references to objects
\vfill
\item Every object has a type. We have learned about strings, numbers, lists, and booleans (True, False)
\vfill
\item In the next section on classes, we will learn more about the relationship between the type and the object
\end{itemize}
\end{frame}
\begin{frame}[fragile]
\frametitle{Formatting Python Strings}
\begin{itemize}
\item You may have noticed that we can end up with a lot of decimals in Python output
\vfill
\item Further, you may want to include your results as part of a larger output, such as a sentence.
\vfill
\item For these operations, we have \texttt{f} strings: \texttt{f''}
\end{itemize}
\begin{block}<+>{Example}
\begin{minted}{python}

>>> my_num = 5 / 6
>>> print(my_num)
0.8333333333333334
>>> print(f'My number is {my_num:.2f}')
'My number is 0.83'

\end{minted}
\end{block}
\end{frame}
\begin{frame}
\frametitle{Numeric Types}
\begin{itemize}
\item So far I have just said that numbers are a type in Python, but this is a simplification
\vfill
\item There are two main types of numbers in python:
\texttt{float}
and
\texttt{int}
corresponding to a floating point number and an integer, respectively
\vfill
\item An
\texttt{int}
is a number without decimals, while a
\texttt{float}
has decimals, regardless of whether they are zero
\vfill
\item For example,
\texttt{3.5}
and
\texttt{3.0}
are floats, while
\texttt{3}
is an int, even though
\texttt{3.0 == 3 is True}
\vfill
\item Usually, this doesn't matter. But to loop a number of times, you must pass an
\texttt{int}
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Additional Built-In Types}
\begin{itemize}
\item A
\texttt{tuple}
is like a
\texttt{list}
but you can't change it after it has been created (it is immutable)
\vfill
\item Tuples are in parentheses instead of brackets, e.g.
\texttt{("a", "b")}
\vfill
\item A
\texttt{dict}
short for dictionary, stores a mapping. Use them if you want to store values associated to other values
\vfill
\item We will come back to
\texttt{dicts}
later in the course, but I wanted to
introduce them now as they are a very fundamental data type
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Data Types Example}
{
\setbeamercolor{block title}{bg=darkgreen}
\begin{block}{Understanding the Different Data Types}
\begin{itemize}
\item We will keep working off of Python Basics.ipynb
\item Now I will go through the example material under "Exploring Data Types"
\end{itemize}
\end{block}
}
\end{frame}
\begin{frame}
\frametitle{Data Types Lab, Level 1}
{
\setbeamercolor{block title}{bg=violet}
\begin{block}{Working with Data Types, Level 1}
\begin{enumerate}
\item Keep working off of Python Basics Lab.ipynb
\item Please complete the exercises under "Data Types"
\end{enumerate}
\vfill
\end{block}
}
\label{lab:data-types-1}
\end{frame}
\end{section}
\begin{section}[Classes]{Classes and Dataclasses}
\begin{frame}
\frametitle{Overview of Classes and Objects}
\begin{center}
\begin{adjustbox}{width=0.9\textwidth, height=0.8\textheight, keepaspectratio}
\includegraphics[width=1.0\textwidth]{Sources/class-object.pdf}
\end{adjustbox}
\end{center}
\end{frame}
\begin{frame}
\frametitle{Everything is an Object. Every Object has a Class}
\begin{itemize}
\item In Python, everything is an object except for variable names, which are references to objects
\vfill
\item Strings, floats, ints, lists, and tuples are types of objects. There are many more types of objects and users can define their own types of objects
\vfill
\item A class is a definition for a type of object. It defines how it is created, the data stored in it, and the functions attached to it
\vfill
\item We can write our own classes to create new types of objects to work with
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Many Objects to One Class}
\begin{itemize}
\item From a single class definition, an unlimited number of objects can be created
\vfill
\item Typically the class definition says it should accept some data to create the object
\vfill
\item Then when you have multiple objects of the same type (created from the same class), they will have the same functions (methods) attached to them, but different data stored within
\vfill
\item For example, we can create two different lists. They will have different contents, but we can
do
\texttt{.append}
on either of the lists
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Lists are Objects}
\begin{adjustbox}{width=0.425\textwidth, height=0.8\textheight, keepaspectratio}
\includegraphics[width=1.0\textwidth]{Sources/class-object.pdf}
\end{adjustbox}
\hfill
\begin{adjustbox}{width=0.425\textwidth, height=0.8\textheight, keepaspectratio}
\includegraphics[width=1.0\textwidth]{Sources/list-object.pdf}
\end{adjustbox}
\end{frame}
\begin{frame}
\frametitle{We can Make Custom Objects Too}
\begin{adjustbox}{width=0.425\textwidth, height=0.8\textheight, keepaspectratio}
\includegraphics[width=1.0\textwidth]{Sources/class-object.pdf}
\end{adjustbox}
\hfill
\begin{adjustbox}{width=0.425\textwidth, height=0.8\textheight, keepaspectratio}
\includegraphics[width=1.0\textwidth]{Sources/car-object.pdf}
\end{adjustbox}
\end{frame}
\begin{frame}[fragile]
\frametitle{Creating and Using Objects}
\begin{itemize}
\item Constructing an object from a class looks like calling a function:
\end{itemize}
\begin{block}{Using Custom Classes in Python}
\small
\begin{minted}{python}

from car_example import Car

>>> my_car = Car('Honda', 'Civic')
>>> print(my_car)
Car(make='Honda', model='Civic')
>>> type(my_car)
car_example.Car
>>> my_car.make
'Honda'
>>> my_car.drive()
'The Honda Civic is driving away!'

\end{minted}
\end{block}
\end{frame}
\begin{frame}
\frametitle{Where we Will Focus in This Course}
\begin{itemize}
\item I will not be teaching you about creating general classes in this course. It is very useful but is generally more advanced. I encourage you to learn them outside the course.
\vfill
\item We covered this material for two reasons:
\vfill
\item To give a better understanding of how Python works in general, and why sometimes we call functions as
\texttt{something.my\_func()}
rather than
\texttt{my\_func()}
\vfill
\item We are going to use
\texttt{dataclasses}
to store our model data. They are
a simplified version of classes used mainly for storing data.
\end{itemize}
\end{frame}
\begin{frame}[fragile]
\frametitle{Dataclass Intro}
\begin{itemize}
\item An organized way to store our model input data:
\end{itemize}
\begin{block}{Using Dataclasses in Python}
\scriptsize
\begin{minted}{python}

from dataclasses import dataclass

@dataclass
class ModelInputs:
    interest_rates: tuple = (0.05, 0.06, 0.07)
    pmt: float = 1000

>>> inputs = ModelInputs(pmt=2000)
>>> print(inputs)
ModelInputs(interest_rates=(0.05, 0.06, 0.07), pmt=2000)
>>> type(inputs)
__main__.ModelInputs
>>> inputs.interest_rates
(0.05, 0.06, 0.07)
>>> inputs.pmt
2000

\end{minted}
\end{block}
\end{frame}
\begin{frame}
\frametitle{What, When and Why Dataclasses?}
\begin{itemize}
\item A
\texttt{dataclass}
is just a class which is more convenient to create, and
is typically used to group data together
\vfill
\item If you need to pass around multiple variables together, they make sense. For our models, we will want to pass around all the inputs, so one
\texttt{dataclass}
for all the
inputs to the model makes sense
\vfill
\item This way instead of having to pass around every input individually to every function, just pass all the input data as one argument
\vfill
\item Also enables easy tab-completion. What were the names of my inputs? Just hit tab after
\texttt{data.}
\end{itemize}
\end{frame}
\begin{frame}
\frametitle{Classes Example}
{
\setbeamercolor{block title}{bg=darkgreen}
\begin{block}{Working with Classes and Creating Dataclasses}
\begin{itemize}
\item We will keep working off of Python Basics.ipynb
\item For this example, also go and download car\_example.py and put it in the same folder
\item Now I will go through the example material under "Working with Classes"
\end{itemize}
\end{block}
}
\end{frame}
\begin{frame}
\frametitle{Classes Lab, Level 1}
{
\setbeamercolor{block title}{bg=violet}
\begin{block}{Getting Started with Classes, Level 1}
\begin{enumerate}
\item Keep working off of Python Basics Lab.ipynb
\item Make sure you have car\_example.py in the same folder
\item Please complete the exercises under "Working with Classes"
\end{enumerate}
\vfill
\end{block}
}
\label{lab:classes-1}
\end{frame}
\end{section}
\begin{section}[Errors]{Error Handling}
\begin{frame}[fragile]
\frametitle{Python Error Handling}
\begin{itemize}
\item You have certainly already seen errors coming from your Python code. When they have come up, the code doesn't run.
\vfill
\item Sometimes you actually expect to get an error, and want to handle it in some way, rather than having your program fail.
\end{itemize}
\begin{block}<+>{Example}
\begin{minted}{python}

>>> my_list = ['a', 'b']
>>> try:
>>>     my_value = my_list[10]
>>> except IndexError:
>>>     print('caught the error')
caught the error

\end{minted}
\end{block}
\end{frame}
\begin{frame}
\frametitle{An Example where Error Handling is Useful}
\begin{itemize}
\item Let's say you're receiving annuities. There is a single annuity which produces \$100 for 5 years. You receive this annuity in year 0 and in year 3.
\vfill
\item You might define the annuity cash flows as a list of 100, 5 times (\texttt{[100] * 5})
\vfill
\item Then you want to come up with your overall cash flows, going out to 15 years
\end{itemize}
\end{frame}
\begin{frame}[fragile]
\frametitle{Applying Error Handling}
\begin{block}{Calculating the Sum of Unaligned Annuity Cash-Flows}
\small
\begin{minted}{python}

>>> annuity = [100] * 5
>>> annuities = [
>>>     annuity,
>>>     [0, 0, 0] + annuity
>>> ]
>>> n_years = 10
>>> output = [0] * n_years
>>> for i in range(n_years):
>>>     for ann in annuities:
>>>         try:
>>>             output[i] += ann[i]
>>>         except IndexError:
>>>             pass
>>> print(output)   
[100, 100, 100, 200, 200, 100, 100, 100, 0, 0]

\end{minted}
\end{block}
\end{frame}
\end{section}
\end{document}